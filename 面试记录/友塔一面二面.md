友塔一面，电话面的，听声音像个年轻的小哥，倒是聊的挺开心的。

这次的发挥明显比字节跳动那次好多了，而且明显感觉难度要简单很多。

# 一面
## 自我介绍
## 请你从玩家角度和设计者角度评价《炉石传说》
对，我顺带投了一下策划岗=。=
## 项目
## 学过哪些数据结构算法
### 你说一下小根堆吧
堆是一颗完全二叉树（面试的时候说成平衡二叉树了）。它满足两个性质：
1. 任意节点的值大于其父节点的值。
2. 任意节点的值小于其左右儿子的值。

因此根最小。
### 堆为什么是一颗完全二叉树
堆从结构上就是一颗完全二叉树，因此它总是能用一个数组来表示。（这里应该是为了提示我我之前说错了）
### 删除堆的任意一个节点
将节点与堆的尾节点交换并删除，对交换后的尾节点（现在在删除节点的位置）先上浮后下沉。
## 编程题说思路
消除相同方块的问题，leetcode有。

[Remove Boxes](https://leetcode.com/problems/remove-boxes/)

好像还问了点什么其它的忘了。。

# 二面
楼主二面完面试官跟我说过了，还是蛮开心的，毕竟是自己的第一个offer（虽然还没HR面）。

人很nice，聊了很多开发之外的东西，例如聊了聊我之前做的游戏，说了说自己的看法。

虽然不一定会去，但单从面试上还是蛮友好的。
## 还是自我介绍
## 介绍一下你的游戏经历
## 说说你的项目
## Unity中UI和GameObject为什么不是同一类对象
这里我说的它们渲染顺序不同，UI后渲染。又说了UI不需要参加很多游戏逻辑的交互，例如碰撞等。

面试官说本质上是因为UI对象是绑定在相机上，跟随相机移动的。

我说那它们如果是同一类对象的话也可以实现啊，把UI对象作为相机的子对象不就可以了。

面试官说对Unity以前就是这么干的-。-

## 炉石传说一套牌可以生成一串字符串，他人可以用这串字符串来组建相同的套牌，设计这个算法
这道题实际上就是为一套牌设计一个序列化和反序列化算法。

这里我一开始说的是30张牌对应30个id，用一个分隔符分隔开，这是最直接的想法。

然后说可以加一个数字表示卡牌的数量，这样字符串会短一点点（重复的合为一个）。

然后又说假设两千个id，每个id可以用一个哈希函数映射到长度为2的字符串（A-Za-z，52 x 52），这样甚至不需要分隔符。

然后面试官换了个类似的更直观的例子给我。一副扑克牌，去掉大小王52张，每人发13张，同样序列化这13张牌，问最少需要多少字节。

一开始想到了6位能表示一张牌（2<sup>6</sup> = 64 &gt; 52），所以一共需要 6 * 13 / 8 = 10字节。

面试官：还有更小的吗？

后面说到将划分四个区域以此是方块到黑桃，每个区域用1111分隔，每个区域用4位表示对应的大小，这样一共需要（4 * 13 + 12）/ 8 = 8自己。

面试官：还有更小的吗？

后来发现自己犯蠢了，实际上由于52张牌是不会重复的，所以只需要52位，每位表示每张牌是否出现即可，所以是7字节。

## 杀戮尖塔，从代码层面上，讲一讲要怎么设计卡牌的整个机制
这里大概讲了讲每张牌可能有对应的数值，效果和动画。

数值通过加载游戏时查表获得。

效果通过委托的方式，规定好接口（例如说两个参数一个敌人一个自己，没有返回值），在游戏加载的时候查表然后根据id绑定到对应的卡牌上作为回调函数使用。

动画直接通过加载时查表绑定。

面试官说目前的需求是满足的，但效果（或者说技能）可能会有协同性或后效性（就是说延迟生效），由于回调函数只会被调用一次，所以本身并不能实现效果之间的协同性或者后效性。所以我们可以通过设计中间量（中间状态，对玩家可能可见可能不可见），然后效果的实际释放受这些中间量影响，同时也会改变这些中间量）。

还是蛮有道理的。